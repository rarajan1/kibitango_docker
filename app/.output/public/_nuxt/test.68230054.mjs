import{_ as z}from"./phaseButton.edd73473.mjs";import{_ as D}from"./loadingDisplay.763fb565.mjs";import{o as n,b as o,e,z as d,F as p,y as k,r as _,l as N,j as G,t as h,u,c as $,q as O,s as F}from"./entry.1765734b.mjs";const L={class:"row py-5 border-bottom border-primary"},M={class:"col-12 mb-3 d-flex justify-content-center fs-2"},V={class:"col-md-4 offset-md-2 d-flex justify-content-center align-items-center fs-3"},U={class:"col-md-4"},W={class:"row justify-content-center"},E={class:"col-12 p-1 d-flex justify-content-center"},I=["id","name","value"],H=["for"],J={__name:"studentTestQuestion",props:{questionNum:Number,question:String,choices:String},setup(t){const m=c=>{const a=c;return c.reduce((l,r,i)=>{let v=Math.floor(Math.random()*(i+1));return a[i]=a[v],a[v]=r,a})};return(c,a)=>(n(),o("div",L,[e("div",M,[e("span",null,"Q"+d(t.questionNum+1),1)]),e("h3",V,d(t.question),1),e("div",U,[e("div",W,[(n(!0),o(p,null,k(m(t.choices.split(",")),l=>(n(),o("div",E,[e("input",{class:"form-check-input",type:"radio",id:t.questionNum+l,name:t.questionNum,value:l,onChange:a[0]||(a[0]=r=>c.$emit("update:answer",r,t.questionNum))},null,40,I),e("label",{class:"from-check-label px-3",for:t.questionNum+l},d(l),9,H)]))),256))])])]))}},K={class:"row py-5 border-bottom border-primary"},R={class:"col-12 mb-3 d-flex justify-content-center fs-2"},X={class:"col-12 mb-5 d-flex justify-content-center"},Y={key:0,class:"maru d-flex justify-content-center align-items-center fs-4"},Z={key:1,class:"d-flex align-items-center flex-column"},ee=e("div",{class:"batu fs-4 d-flex justify-content-center align-items-center"},[e("div",{style:{"z-index":"1","background-color":"white"}},"\u4E0D\u6B63\u89E3")],-1),te={class:"d-flex justify-content-center"},se={class:"col-md-4 offset-md-2 d-flex justify-content-center align-items-center fs-3"},ne={class:"col-md-4"},oe={class:"row"},ae={class:"col-12 fs-5 m-0 border-bottom"},re={class:"col-12"},ce={__name:"studentTestAnswer",props:{questionNum:Number,question:String,answer:String,userAnswer:String,remark:String},setup(t){return(m,c)=>(n(),o("div",K,[e("div",R,[e("span",null,"Q"+d(t.questionNum+1),1)]),e("div",X,[t.userAnswer==t.answer?(n(),o("div",Y,"\u6B63\u89E3")):(n(),o("div",Z,[ee,e("div",te,"\u3042\u306A\u305F\u306E\u7B54\u3048:"+d(t.userAnswer),1)]))]),e("h3",se,d(t.question),1),e("div",ne,[e("div",oe,[e("p",ae,"\u7B54\u3048: "+d(t.answer),1),e("div",re,d(t.remark),1)])])]))}},le={class:"container"},ie={key:0},ue=e("div",{class:"row py-5 justify-content-center"},[e("p",{class:"fs-4 col-auto"},"\u53D7\u3051\u305F\u3044\u554F\u984C\u306E\u30D5\u30A7\u30A4\u30BA\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044")],-1),de={class:"row g-2 justify-content-center"},fe={key:2},me={class:"row p-5 gy-5 justify-content-center"},_e={class:"col-12"},he={key:0,class:"fs-4 text-danger"},ve={key:3},ye={class:"col-12"},ge={class:"offset-lg-3 col-lg-6 my-5 d-flex flex-column align-items-center"},pe={__name:"test",setup(t){const m=_(""),c=_(!0),a=_(!1),l=_(!1),r=_([]),i=_(!0);let v=[],q=[];const{data:y,pending:x}=N("lordWards",()=>$fetch("/api/word/loadWards",{method:"POST",body:{phase:m.value}}),{server:!1,initialCache:!1,watch:[m]},"$aCTFAs6lAz"),{pending:b}=N("saveGrades",()=>$fetch("/api/grade/saveGrades",{method:"POST",body:{wordIds:v,results:q}}),{initialCache:!1},"$rqlgsx8qMq"),S=s=>{m.value=s.target.value,a.value=!0,c.value=!1},j=(s,g)=>{r.value[g]=s.target.value,i.value||(i.value=A())},A=()=>{if(r.value.length!=y.value.length)return!1;for(let s=0;s<r.value.length;s++)if(r.value[s]==null)return!1;return!0},C=async()=>{if(i.value=A(),i.value){a.value=!1,l.value=!0;for(let s=0;s<r.value.length;s++)q[s]=r.value[s]==y.value[s].answer,v[s]=y.value[s].word_id;await O("saveGrades")}};return(s,g)=>{const T=z,P=D,B=J,Q=ce;return n(),o("div",le,[c.value?(n(),o("div",ie,[ue,e("div",de,[G(T,{onOnChangePhase:S})])])):h("",!0),u(b)||u(x)?(n(),$(P,{key:1})):h("",!0),a.value&&!u(x)?(n(),o("div",fe,[e("div",me,[e("div",_e,[(n(!0),o(p,null,k(u(y),(f,w)=>(n(),$(B,{questionNum:w,question:f.word,choices:f.choices,"onUpdate:answer":j},null,8,["questionNum","question","choices"]))),256))]),i.value?h("",!0):(n(),o("p",he,"\u56DE\u7B54\u3057\u3066\u3044\u306A\u3044\u554F\u984C\u304C\u3042\u308A\u307E\u3059")),e("button",{class:"col-10 p-3 btn btn-primary btn-lg",onClick:C},"\u7B54\u3048\u5408\u308F\u305B\u3092\u3059\u308B")])])):h("",!0),l.value&&!u(b)?(n(),o("div",ve,[e("div",ye,[u(b)?h("",!0):(n(!0),o(p,{key:0},k(u(y),(f,w)=>(n(),$(Q,{questionNum:w,question:f.word,answer:f.answer,remark:f.remark,userAnswer:r.value[w]},null,8,["questionNum","question","answer","remark","userAnswer"]))),256))]),e("div",ge,[e("button",{class:"btn btn-primary btn-lg",onClick:g[0]||(g[0]=f=>u(F)("/student",{replace:!0}))},"\u30DB\u30FC\u30E0\u753B\u9762\u306B\u884C\u304F")])])):h("",!0)])}}};export{pe as default};
