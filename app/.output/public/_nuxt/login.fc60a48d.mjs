import{r as _,a as x,w as y,o as L,b as k,e,f as T,h as s,v as i,i as v,u as p,j as D,k as N,l as S,m as V,p as A,q as B,s as f}from"./entry.1765734b.mjs";const C={class:"container mt-5 mb-5"},z={class:"row"},I={class:"offset-lg-3 col-lg-6"},M=e("h1",{class:"mt-3 mb-3"},"\u30ED\u30B0\u30A4\u30F3",-1),U=["onSubmit"],$={class:"form-text text-danger fs-5"},j={class:"mb-3"},q=e("label",{class:"form-label",for:"id"},"ID",-1),E={class:"mb-3"},F=e("label",{class:"form-label",for:"password"},"\u30D1\u30B9\u30EF\u30FC\u30C9",-1),O={class:"btn btn-primary",type:"submit"},P={class:"spinner-border spinner-border-sm"},W=A("\u767B\u9332\u3057\u3066\u3044\u306A\u3044\u65B9\u306F\u3053\u3061\u3089"),J={__name:"login",async setup(G){let a,h;const r=_(""),o=_(""),n=_(!1),m=x(),{data:t,pending:c,error:b}=([a,h]=y(()=>S("login",()=>$fetch("/api/auth/login",{method:"POST",body:{id:r.value,password:o.value}},{initialCache:!1}),"$lzuF23kIAs")),a=await a,h(),a),g=async()=>{var d;await B("login"),n.value=((d=t.value)==null?void 0:d.token)===void 0,b.value||(!n.value&&!t.value.isTeacher&&(m.Login(t.value.id),f("/student",{replace:!0})),!n.value&&t.value.isTeacher&&(m.Login(t.value.id,!0),f("/teacher",{replace:!0}))),o.value=""};return(d,l)=>{const w=V;return L(),k("div",C,[e("div",z,[e("div",I,[M,e("form",{class:"border border-2 rounded p-3",onSubmit:T(g,["prevent"])},[s(e("div",$,"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u304B\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093",512),[[i,n.value]]),e("div",j,[q,s(e("input",{class:"form-control","onUpdate:modelValue":l[0]||(l[0]=u=>r.value=u)},null,512),[[v,r.value]])]),e("div",E,[F,s(e("input",{class:"form-control",type:"password","onUpdate:modelValue":l[1]||(l[1]=u=>o.value=u)},null,512),[[v,o.value]])]),e("button",O,[s(e("span",P,null,512),[[i,p(c)]]),s(e("span",null," Loading...",512),[[i,p(c)]]),s(e("span",null,"\u30ED\u30B0\u30A4\u30F3",512),[[i,!p(c)]])])],40,U),D(w,{to:"/auth/register"},{default:N(()=>[W]),_:1})])])])}}};export{J as default};
