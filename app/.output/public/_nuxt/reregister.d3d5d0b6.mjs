import{r as o,a as H,w as Q,l as W,o as F,b as T,e,u as D,t as B,f as Y,h as s,v as a,i as j,B as Z,q as J,s as K}from"./entry.1765734b.mjs";const X={class:"container mt-5 mb-5"},ee={key:0,class:"row"},se={class:"offset-lg-3 col-lg-6 d-flex flex-column align-items-center"},ae=e("h1",{class:"mt-3 mb-3"},"\u767B\u9332\u60C5\u5831\u306E\u5909\u66F4\u3092\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",-1),te={key:1,class:"row"},le={class:"offset-lg-3 col-lg-6"},oe=e("h1",{class:"mt-3 mb-3"},"\u767B\u9332\u60C5\u5831\u5909\u66F4",-1),ne=["onSubmit"],ie={class:"mb-3"},ue=e("label",{class:"form-label",for:"id"},"ID",-1),de=["value","disabled"],re={class:"form-text"},ve={class:"form-text text-danger"},ce={class:"form-text text-danger"},me={class:"form-text text-success"},_e={class:"form-text"},be={class:"mb-3"},he=e("label",{class:"form-label",for:"emailAddress"},"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",-1),fe=["value","disabled"],pe={class:"form-text"},ge={class:"form-text text-danger"},ye={class:"mb-3"},xe=e("label",{class:"form-label",for:"family_name"},"\u82D7\u5B57",-1),we=["value","disabled"],Ie={class:"form-text"},Ce={class:"form-text text-danger"},Ae={class:"mb-3"},De=e("label",{class:"form-label",for:"first_name"},"\u540D\u524D",-1),ke=["value","disabled"],$e={class:"form-text"},Pe={class:"form-text text-danger"},Fe={class:"mb-3"},Te=e("label",{class:"form-label",for:"password"},"\u30D1\u30B9\u30EF\u30FC\u30C9",-1),Ne=["value","disabled"],Oe={class:"form-text"},Ee={class:"form-text text-danger"},Se={class:"mb-3"},ze=e("label",{class:"form-label",for:"copyPassword"},"\u78BA\u8A8D\u7528\u30D1\u30B9\u30EF\u30FC\u30C9",-1),Be=["disabled"],Ze={class:"form-text"},Le={class:"form-text text-danger"},Ue=["disabled"],Ge={class:"spinner-border spinner-border-sm"},Ve={__name:"reregister",async setup(Me){let N,O;const n=o(""),b=o(""),u=o(""),w=o(""),h=o(""),f=o(""),v=o(!0),c=o(!0),m=o(!0),_=o(!0),i=o(!0),d=o(!0),p=o(!0),g=o(!0),y=o(!0),I=o(!0),k=o(!1),E=H(),{state:S}=E;[N,O]=Q(()=>Z("getUserData",()=>$fetch("/api/auth/getUserDeta",{method:"POST",body:{user_id:S.value.id}}),{initialCache:!1},"$9NEB7bQ1Zd").then(({data:t})=>{n.value=t.value.user_id,b.value=t.value.email,h.value=t.value.family_name,f.value=t.value.first_name})),await N,O();const{data:L,pending:C}=W("CheckId",()=>$fetch("/api/auth/CheckId",{method:"POST",body:{id:n.value}}),{initialCache:!1},"$F8WMYfBHT2"),$=100;let A=$;const z=o(!0);let P=!1;const U=async t=>{if(z.value=!1,d.value=!1,C.value=!0,n.value=t.target.value,P)A=$;else{for(;A!=0;)P=!0,await new Promise(l=>{setTimeout(()=>{A--,l()},10)});A=$,P=!1,await J("CheckId"),d.value=L.value&&n.value.length<100}},G=t=>{const l=/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]+\.[A-Za-z0-9]+$/;b.value=t.target.value,p.value=l.test(b.value)},M=t=>{f.value=t.target.value,I.value=f.value!=""},R=t=>{h.value=t.target.value,y.value=h.value!="",console.log(y.value)},V=t=>{u.value=t.target.value;const l=/^[A-Za-z0-9_@\.\-<>]+$/;g.value=u.value.length>=8&&l.test(u.value)},x=o(!1),q=()=>{d.value&&n.value.length<100&&p.value&&g.value&&y.value&&I.value&&u.value==w.value&&(x.value=!0,Z("reRegister",()=>$fetch("/api/auth/reregister",{method:"POST",body:{currentId:S.value.id,id:n.value,emailAddress:b.value,family_name:h.value,first_name:f.value,password:u.value,changeId:!v.value,changeEmail:!c.value,changeFamilyName:!m.value,changeFirstName:!_.value,changePassword:!i.value}}),{initialCache:!1},"$mGwGymoGbL").then(({data:t})=>{d.value=t.value.hasId,y.value=t.value.hasFamily_name,I.value=t.value.hasFirst_name,g.value=t.value.hasPassword,p.value=t.value.hasEmailAddress,d.value&&g.value&&p.value&&(k.value=!0,E.Login(n.value)),x.value=!1}))};return(t,l)=>(F(),T("div",X,[k.value?(F(),T("div",ee,[e("div",se,[ae,e("button",{class:"btn btn-primary btn-lg",onClick:l[0]||(l[0]=r=>D(K)("/student",{replace:!0}))},"\u30DB\u30FC\u30E0\u753B\u9762\u306B\u884C\u304F")])])):B("",!0),k.value?B("",!0):(F(),T("div",te,[e("div",le,[oe,e("form",{class:"border border-2 rounded p-3",onSubmit:Y(q,["prevent"])},[e("div",ie,[ue,e("input",{class:"form-control",id:"id",value:n.value,onInput:U,disabled:v.value},null,40,de),s(e("div",re,"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7(><-_.@)\u3067ID\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u4ED6\u306E\u30E6\u30FC\u30B6\u30FC\u304C\u4F7F\u7528\u3057\u3066\u3044\u308BID\u306F\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093",512),[[a,!v.value]]),s(e("div",ve,"100\u6587\u5B57\u4EE5\u4E0A\u306F\u4F7F\u3048\u307E\u305B\u3093",512),[[a,n.value.length>=100]]),s(e("div",ce,"\u3053\u306EID\u306F\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093\u3002",512),[[a,!d.value&&!D(C)]]),s(e("div",me,"\u3053\u306EID\u306F\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002",512),[[a,!z.value&&d.value&&!D(C)&&!(n.value.length>=100)]]),s(e("div",_e,"\u691C\u8A3C\u4E2D",512),[[a,D(C)]]),s(e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l[1]||(l[1]=r=>v.value=!1)},"\u5909\u66F4\u3059\u308B\u5834\u5408\u62BC\u3057\u3066\u304F\u3060\u3055\u3044",512),[[a,v.value]])]),e("div",be,[he,e("input",{class:"form-control",type:"text",id:"emailAddress",value:b.value,onInput:G,disabled:c.value},null,40,fe),s(e("div",pe,"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!c.value]]),s(e("div",ge,"\u6B63\u3057\u3044\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u3044\u308C\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!p.value]]),s(e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l[2]||(l[2]=r=>c.value=!1)},"\u5909\u66F4\u3059\u308B\u5834\u5408\u62BC\u3057\u3066\u304F\u3060\u3055\u3044",512),[[a,c.value]])]),e("div",ye,[xe,e("input",{class:"form-control",id:"family_name",value:h.value,onInput:R,disabled:m.value},null,40,we),s(e("div",Ie,"\u82D7\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!m.value]]),s(e("div",Ce,"\u82D7\u5B57\u304C\u7A7A\u6B04\u3067\u3059\u3002",512),[[a,!y.value]]),s(e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l[3]||(l[3]=r=>m.value=!1)},"\u5909\u66F4\u3059\u308B\u5834\u5408\u62BC\u3057\u3066\u304F\u3060\u3055\u3044",512),[[a,m.value]])]),e("div",Ae,[De,e("input",{class:"form-control",id:"first_name",value:f.value,onInput:M,disabled:_.value},null,40,ke),s(e("div",$e,"\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!_.value]]),s(e("div",Pe,"\u540D\u524D\u304C\u7A7A\u6B04\u3067\u3059\u3002",512),[[a,!I.value]]),s(e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l[4]||(l[4]=r=>_.value=!1)},"\u5909\u66F4\u3059\u308B\u5834\u5408\u62BC\u3057\u3066\u304F\u3060\u3055\u3044",512),[[a,_.value]])]),e("div",Fe,[Te,e("input",{class:"form-control",id:"password",type:"password",value:u.value,onInput:V,disabled:i.value},null,40,Ne),s(e("div",Oe,"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7(><-_.@)\u304B\u30648\u6587\u5B57\u4EE5\u4E0A\u3067\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!i.value]]),s(e("div",Ee,"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\uFF18\u6587\u5B57\u4EE5\u4E0A\u3067\u306F\u306A\u3044\u304B\u3001\u5229\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u304C\u542B\u307E\u308C\u307E\u3059\u3002",512),[[a,!g.value]]),s(e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l[5]||(l[5]=r=>i.value=!1)},"\u5909\u66F4\u3059\u308B\u5834\u5408\u62BC\u3057\u3066\u304F\u3060\u3055\u3044",512),[[a,i.value]])]),e("div",Se,[ze,s(e("input",{class:"form-control",id:"copyPassword",type:"password","onUpdate:modelValue":l[6]||(l[6]=r=>w.value=r),disabled:i.value},null,8,Be),[[j,w.value]]),s(e("div",Ze,"\u5148\u307B\u3069\u5165\u529B\u3057\u305F\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u540C\u3058\u3082\u306E\u3092\u5165\u308C\u3066\u304F\u3060\u3055\u3044\u3002",512),[[a,!i.value]]),s(e("div",Le,"\u540C\u4E00\u306A\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002",512),[[a,u.value!=w.value]])]),e("button",{class:"btn btn-primary",type:"submit",disabled:v.value&&c.value&&m.value&&_.value&&i.value},[s(e("span",Ge,null,512),[[a,x.value]]),s(e("span",null," Loading...",512),[[a,x.value]]),s(e("span",null,"\u5909\u66F4\u3092\u78BA\u5B9A",512),[[a,!x.value]])],8,Ue)],40,ne)])]))]))}};export{Ve as default};
